## アーキテクチャ大改装
「変更が容易な」サーバーコードにリファクタリングする

### サービス層を大改装
- sql.DB型を頻繁に呼び出している
- データベースの情報がservices/helper.goにあるということがわかりにくい
解決策
1. 「サービス構造体」を新しく定義する
2. 新しく定義した自作サービス構造体の中に、sql.DB型のフィールドを作る
3. 現状のサービス関数を、その自作構造体のメソッドという形に直す

### サービス層を使う側を大改装
ハンドラ層を書き換える→コントローラ層にする  
before
1. main.goの中で、ハンドラ層の関数とパスの関連付けを行う
2. ハンドラ層から、サービス層の関数を呼び出す
3. 各サービス関数の中でその都度sql.DB型を生成し、データベース関連の処理を行う

after
1. サーバー全体で使用するsql.DB型を一つ生成する
2. sql.DB型をもとに、サーバー全体で使用するサービス構造体MyAppServiceを一つ生成する
3. MyAppService型をもとに、サーバー全体で使用するコントローラ構造体MyAppControllerを一つ生成する
4. コントローラ型MyAppControllerのハンドラメソッドとパスの関連付けを行う

依存性の注入

### ルータ層の作成
パスーハンドラ関数を別ディレクトリに切り出すリファクタを行う

### インターフェースによる抽象化・疎結合化
インターフェースを用いた抽象化  
before  
コントローラにはサービス構造体MyAppService型が必要だった.  
→柔軟性に欠ける  

after  
インターフェースを満たしていればコントローラを作ることができる  
→コントローラ・サービス間を疎結合して柔軟化することができる

### インターフェースの小型化による役割の分離
サービスインターフェースとコントローラ構造体の分離を行った